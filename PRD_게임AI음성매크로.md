# 게임 AI 음성 매크로 프로그램 PRD (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 프로젝트 명
**VoiceMacro Pro - 게임 AI 음성 매크로 프로그램**

### 1.2 프로젝트 목적
- 게이머들이 음성 명령을 통해 복잡한 키보드/마우스 조작을 자동화할 수 있는 매크로 프로그램
- 음성 인식 AI를 활용하여 직관적이고 편리한 매크로 제어 시스템 구축

### 1.3 대상 사용자
- PC 게임 플레이어 (특히 MMO, RTS, FPS 게임)
- 반복적인 작업이 많은 게임 사용자
- 신체적 제약으로 키보드 조작이 어려운 사용자

## 2. 기술 스택

### 2.1 백엔드 (Python)
- **OpenAI Whisper**: 음성 인식 및 텍스트 변환
- **PyAutoGUI**: 키보드/마우스 자동화
- **Flask/FastAPI**: 백엔드 API 서버
- **SQLite**: 로컬 데이터베이스 (매크로 저장)

### 2.2 프론트엔드 (C# WPF)
- **C# WPF**: 메인 애플리케이션 프레임워크
- **XAML**: UI 레이아웃 정의
- **CSS**: 스타일링 (WPF에서 사용 가능한 범위)

## 3. 핵심 기능 명세

### 3.1 기능 1: 매크로 관리 시스템

#### 3.1.1 기능 설명
매크로의 음성 명령어와 실행 동작을 체계적으로 관리하는 시스템

#### 3.1.2 세부 기능
- **매크로 목록 시트**: 
  - 음성 명령어, 동작 설명, 생성일, 최근 사용일 표시
  - 검색 및 필터링 기능
  - 정렬 기능 (이름순, 생성일순, 사용빈도순)

- **매크로 CRUD 기능**:
  - **추가**: 새로운 매크로 생성 및 등록
  - **수정**: 기존 매크로의 명령어 또는 동작 변경
  - **복사**: 기존 매크로를 복제하여 새로운 매크로 생성
  - **삭제**: 불필요한 매크로 제거

#### 3.1.3 사용자 인터페이스
```
[매크로 관리] 탭
├── 매크로 목록 DataGrid
│   ├── 음성 명령어 | 동작 설명 | 생성일 | 사용 횟수
│   └── 정렬/필터 옵션
├── 버튼 그룹
│   ├── [새 매크로 추가] 버튼
│   ├── [수정] 버튼
│   ├── [복사] 버튼
│   └── [삭제] 버튼
└── 검색 박스
```

### 3.2 기능 2: 음성 인식 및 매크로 매칭 시스템

#### 3.2.1 기능 설명
사용자의 음성을 실시간으로 녹음하고 분석하여 등록된 매크로 명령어와 매칭

#### 3.2.2 세부 기능
- **실시간 음성 녹음**: 
  - 마이크 권한 관리
  - 음성 입력 레벨 표시
  - 백그라운드 녹음 기능

- **음성 분석 및 텍스트 변환**:
  - OpenAI Whisper를 통한 고정밀 음성 인식
  - 노이즈 필터링
  - 다국어 지원 (한국어, 영어)

- **명령어 매칭**:
  - 유사도 기반 매크로 검색
  - 부분 일치 및 동의어 처리
  - 확신도 표시

#### 3.2.3 사용자 인터페이스
```
[음성 인식] 탭
├── 음성 입력 상태 표시
│   ├── 마이크 레벨 게이지
│   ├── 녹음 상태 LED
│   └── 인식된 텍스트 표시창
├── 설정 그룹
│   ├── 마이크 선택 드롭다운
│   ├── 감도 조절 슬라이더
│   └── 언어 선택 옵션
└── 매칭 결과 표시
    ├── 매칭된 매크로 목록
    └── 확신도 표시
```

### 3.3 기능 3: 매크로 동작 메커니즘 설정

#### 3.3.1 기능 설명
다양한 게임 상황에 맞는 매크로 동작 패턴 설정

#### 3.3.2 세부 기능
- **콤보**: 여러 키를 순차적으로 입력
  - 키 간 딜레이 설정
  - 콤보 순서 편집기

- **연사**: 특정 키를 빠르게 반복 입력
  - 연사 속도 설정 (CPS - Clicks Per Second)
  - 연사 지속 시간 설정

- **홀드**: 키를 눌러서 유지하는 동작
  - 홀드 지속 시간 설정
  - 자동 해제 조건 설정

- **토글**: 키를 한 번 누르면 ON, 다시 누르면 OFF
  - 토글 상태 표시
  - 토글 해제 명령어 설정

- **반복**: 특정 동작을 지정된 횟수만큼 반복
  - 반복 횟수 설정
  - 반복 간격 설정

#### 3.3.3 사용자 인터페이스
```
[매크로 설정] 탭
├── 매크로 타입 선택 RadioButton 그룹
│   ├── ○ 콤보 ○ 연사 ○ 홀드 ○ 토글 ○ 반복
├── 타입별 설정 패널
│   ├── [콤보 설정] - 키 순서, 딜레이
│   ├── [연사 설정] - 속도, 지속시간
│   ├── [홀드 설정] - 지속시간, 해제조건
│   ├── [토글 설정] - 상태표시, 해제명령
│   └── [반복 설정] - 횟수, 간격
├── 키 입력 설정
│   ├── 키 조합 입력기
│   └── 마우스 좌표 설정
└── 미리보기/테스트 버튼
```

### 3.4 기능 4: 프리셋 관리 시스템

#### 3.4.1 기능 설명
매크로 집합을 프리셋으로 관리하여 게임별 또는 상황별로 빠르게 전환

#### 3.4.2 세부 기능
- **프리셋 파일 관리**:
  - JSON 형태로 프리셋 저장
  - 프리셋 내보내기 (.json, .xml)
  - 프리셋 가져오기 (파일 선택)

- **프리셋 CRUD**:
  - 프리셋 생성/수정/삭제/복사
  - 프리셋 이름 및 설명 관리
  - 프리셋 미리보기

- **프리셋 적용**:
  - 원클릭 프리셋 적용
  - 프리셋 전환 히스토리
  - 즐겨찾기 프리셋

#### 3.4.3 사용자 인터페이스
```
[프리셋 관리] 탭
├── 프리셋 목록 ListBox
│   ├── 프리셋 이름 | 매크로 개수 | 생성일
│   └── 즐겨찾기 표시
├── 프리셋 조작 버튼 그룹
│   ├── [새 프리셋] [수정] [복사] [삭제]
│   ├── [내보내기] [가져오기]
│   └── [적용] [즐겨찾기 추가/제거]
└── 프리셋 미리보기 패널
    └── 포함된 매크로 목록 표시
```

### 3.5 기능 5: 로그 및 모니터링 시스템

#### 3.5.1 기능 설명
매크로 실행 상태를 실시간으로 모니터링하고 로그를 관리

#### 3.5.2 세부 기능
- **실시간 로그 출력**:
  - 매크로 실행 시작/완료 로그
  - 음성 인식 결과 로그
  - 오류 및 경고 메시지

- **로그 관리**:
  - 로그 레벨 설정 (Debug, Info, Warning, Error)
  - 로그 필터링 및 검색
  - 로그 파일 저장 및 내보내기

- **성능 모니터링**:
  - 매크로 실행 성공률 통계
  - 음성 인식 정확도 통계
  - 시스템 리소스 사용량 표시

#### 3.5.3 사용자 인터페이스
```
[로그 및 모니터링] 탭
├── 실시간 로그 출력창
│   ├── 시간 | 레벨 | 메시지
│   └── 자동 스크롤 옵션
├── 로그 제어 패널
│   ├── 로그 레벨 선택
│   ├── 필터 검색박스
│   └── [로그 저장] [로그 지우기] 버튼
└── 통계 패널
    ├── 매크로 실행 성공률 차트
    ├── 음성 인식 정확도 표시
    └── 시스템 리소스 사용량 게이지
```

## 4. 시스템 아키텍처

### 4.1 전체 구조도
```
┌─────────────────┐    HTTP/WebSocket    ┌─────────────────┐
│   C# WPF UI     │ ◄─────────────────► │   Python API    │
│   (프론트엔드)    │                     │   (백엔드)       │
└─────────────────┘                     └─────────────────┘
         │                                        │
         │                                        │
         ▼                                        ▼
┌─────────────────┐                     ┌─────────────────┐
│   Local Config  │                     │   SQLite DB     │
│   Files (.json) │                     │   (매크로 저장)   │
└─────────────────┘                     └─────────────────┘
                                                 │
                                                 ▼
                                       ┌─────────────────┐
                                       │  Audio Processing│
                                       │  (Whisper AI)   │
                                       └─────────────────┘
                                                 │
                                                 ▼
                                       ┌─────────────────┐
                                       │  Input Control  │
                                       │  (PyAutoGUI)    │
                                       └─────────────────┘
```

### 4.2 데이터베이스 스키마
```sql
-- 매크로 테이블
CREATE TABLE macros (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    voice_command TEXT NOT NULL,
    action_type TEXT NOT NULL, -- combo, rapid, hold, toggle, repeat
    key_sequence TEXT NOT NULL, -- JSON format
    settings TEXT, -- JSON format for type-specific settings
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    usage_count INTEGER DEFAULT 0
);

-- 프리셋 테이블
CREATE TABLE presets (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    description TEXT,
    macro_ids TEXT NOT NULL, -- JSON array of macro IDs
    is_favorite BOOLEAN DEFAULT FALSE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 로그 테이블
CREATE TABLE logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    level TEXT NOT NULL, -- DEBUG, INFO, WARNING, ERROR
    message TEXT NOT NULL,
    macro_id INTEGER,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (macro_id) REFERENCES macros (id)
);
```

## 5. 개발 계획 및 우선순위

### 5.1 1단계: 기본 매크로 관리 시스템 (2주)
- 매크로 CRUD 기능 구현
- 기본 UI 프레임워크 구축
- 데이터베이스 스키마 설계 및 구현

### 5.2 2단계: 음성 인식 시스템 (3주)
- OpenAI Whisper 통합
- 실시간 음성 녹음 기능
- 명령어 매칭 알고리즘 구현

### 5.3 3단계: 매크로 동작 메커니즘 (2주)
- PyAutoGUI를 통한 키보드/마우스 제어
- 다양한 매크로 타입 구현
- 매크로 실행 엔진 개발

### 5.4 4단계: 프리셋 관리 시스템 (1주)
- 프리셋 저장/로드 기능
- 파일 내보내기/가져오기
- 프리셋 UI 완성

### 5.5 5단계: 로깅 및 최적화 (1주)
- 로그 시스템 구현
- 성능 모니터링 기능
- 버그 수정 및 최적화

## 6. 기술적 고려사항

### 6.1 보안 및 권한
- 게임 실행 중 매크로 동작 감지 방지
- 관리자 권한 필요 시 사용자 안내
- 개인정보 보호 (음성 데이터 로컬 처리)

### 6.2 성능 최적화
- 실시간 음성 처리 성능 최적화
- 메모리 사용량 최소화
- GPU 가속 활용 (Whisper AI)

### 6.3 호환성
- 다양한 게임과의 호환성 테스트
- Windows 버전별 호환성 확인
- 안티치트 프로그램과의 충돌 방지

## 7. 사용자 경험 (UX) 설계

### 7.1 초보자 친화적 설계
- 직관적인 아이콘과 버튼 배치
- 단계별 튜토리얼 제공
- 도움말 및 FAQ 내장

### 7.2 접근성 고려
- 키보드 네비게이션 지원
- 고대비 테마 옵션
- 폰트 크기 조절 기능

### 7.3 사용자 피드백
- 시각적 피드백 (애니메이션, 상태 표시)
- 청각적 피드백 (효과음, 음성 안내)
- 진행 상황 표시 (프로그레스 바)

## 8. 테스트 계획

### 8.1 단위 테스트
- 각 매크로 타입별 동작 테스트
- 음성 인식 정확도 테스트
- 데이터베이스 연산 테스트

### 8.2 통합 테스트
- 프론트엔드-백엔드 통신 테스트
- 실제 게임 환경에서의 매크로 동작 테스트
- 다양한 하드웨어 환경에서의 호환성 테스트

### 8.3 사용자 테스트
- 베타 테스터 모집 및 피드백 수집
- 사용성 테스트 (UX/UI)
- 성능 테스트 (응답 시간, 리소스 사용량)

이 PRD를 바탕으로 체계적인 개발을 진행하시면 됩니다. 각 단계별로 구체적인 구현 방법이나 코드 예시가 필요하시면 언제든 말씀해 주세요! 